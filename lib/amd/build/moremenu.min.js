define ("core/moremenu",["exports","jquery","core/menu_navigation"],function(a,b,c){"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.default=void 0;b=d(b);c=d(c);function d(a){return a&&a.__esModule?a:{default:a}}var f={regions:{moredropdown:"[data-region=\"moredropdown\"]",morebutton:"[data-region=\"morebutton\"]"},classes:{dropdownitem:"dropdown-item",dropdownmoremenu:"dropdownmoremenu",hidden:"d-none",active:"active",nav:"nav",navlink:"nav-link",observed:"observed"},attributes:{menu:"[role=\"menu\"]",dropdowntoggle:"[data-toggle=\"dropdown\"]"}},g=!1,h=function(a){var b=a.parentNode.offsetHeight+1,c=a.querySelector(f.regions.moredropdown),d=a.querySelector(f.regions.morebutton);if(a.offsetHeight>b){d.classList.remove(f.classes.hidden);var e=Array.from(a.children).reverse();e.forEach(function(c){if(!c.classList.contains(f.classes.dropdownmoremenu)){if(a.offsetHeight>b){var d=a.removeChild(c);i(a,d,!0)}}})}else{if("children"in c){Array.from(c.children).forEach(function(d){if(a.offsetHeight<b&&"true"!==d.dataset.forceintomoremenu){var e=c.removeChild(d);j(a,e)}});if(0===Array.from(c.children).length){d.classList.add(f.classes.hidden)}}if(a.offsetHeight>b){h(a)}}a.parentNode.classList.add(f.classes.observed)},i=function(a,b){var c=2<arguments.length&&arguments[2]!==void 0?arguments[2]:!1,d=a.querySelector(f.regions.moredropdown),e=a.querySelector(f.attributes.dropdowntoggle),h=b.querySelector("."+f.classes.navlink);if(h.classList.contains(f.classes.active)){e.classList.add(f.classes.active);if(g){h.removeAttribute("aria-selected")}h.setAttribute("aria-current","true")}h.setAttribute("role","menuitem");h.classList.remove(f.classes.navlink);h.classList.add(f.classes.dropdownitem);if(c){d.prepend(b)}else{d.append(b)}},j=function(a,b){var c=a.querySelector(f.regions.morebutton),d=a.querySelector(f.attributes.dropdowntoggle),e=b.querySelector("."+f.classes.dropdownitem);if(g){e.setAttribute("role","tab")}if(e.classList.contains(f.classes.active)){d.classList.remove(f.classes.active);if(g){e.removeAttribute("aria-current");e.setAttribute("aria-selected","true")}}e.classList.remove(f.classes.dropdownitem);e.classList.add(f.classes.navlink);a.insertBefore(b,c)},k=function(a){g="tablist"===a.getAttribute("role");var d=window.location.hash;if(!d){var e=g?"tab":"menuitem",j=a.firstElementChild,k="[role=".concat(e,"]"),l=j.querySelector(k);l.setAttribute("tabindex","0");if("tab"==e){l.setAttribute("aria-selected","true")}else{l.setAttribute("aria-current","true")}}if("children"in a){var m=a.querySelector(f.regions.morebutton),n=Array.from(a.children);n.forEach(function(b){if(!b.classList.contains(f.classes.dropdownmoremenu)&&"true"===b.dataset.forceintomoremenu){i(a,b,!1);if(m.classList.contains(f.classes.hidden)){m.classList.remove(f.classes.hidden)}}})}h(a);(0,c.default)(a);window.addEventListener("resize",function(){h(a);(0,c.default)(a)});var o=function(a){var b=a.target.parentNode.querySelector(f.attributes.menu);if(b){b.classList.toggle("show")}a.stopPropagation()};(0,b.default)("."+f.classes.dropdownmoremenu).on("show.bs.dropdown",function(){var b=a.querySelector(f.regions.moredropdown);b.querySelectorAll(".dropdown").forEach(function(a){a.removeEventListener("click",o,!0);a.addEventListener("click",o,!0)})})};a.default=k;return a.default});
//# sourceMappingURL=moremenu.min.js.map
