define ("report_insights/actions",["jquery","core/str","core/ajax","core/notification","core/modal_factory","core/modal_events"],function(a,b,c,d,e,f){return{initBulk:function initBulk(g){var h=function(a){return b.get_strings([{key:"noitemsselected",component:"report_insights"}]).then(function(b){return e.create({type:e.types.CANCEL,title:a,body:b[0]})}).then(function(a){a.show();return a}).catch(d.exception)},i=function(a,b,e){return c.call([{methodname:"report_insights_action_executed",args:{predictionids:a,actionname:e}}])[0].then(function(){var a=!1;b.forEach(function(b){if(!1===a){a=b.closest("table")}b.remove()});if(0===a.find("tbody").length){window.location.reload()}}).catch(d.exception)};a(g+" [data-bulk-actionname]").on("click",function(c){c.preventDefault();var g=a(c.currentTarget),j=g.data("bulk-actionname"),k=g.text().trim(),l=[],m=[];a(".insights-list input[data-togglegroup^=\"insight-bulk-action-\"][data-toggle=\"slave\"]:checked").each(function(){var b=a(this).closest("tbody[data-prediction-id]");m.push(b);l.push(b.data("prediction-id"))});if(0===l.length){return h(k)}var n=[];return b.get_strings([{key:"confirmbulkaction",component:"report_insights",param:{action:k,nitems:l.length}},{key:"confirm",component:"moodle"}]).then(function(a){n=a;return e.create({type:e.types.SAVE_CANCEL,title:k,body:n[0]})}).then(function(a){a.setSaveButtonText(n[1]);a.show();a.getRoot().on(f.save,function(){return i(l,m,j)});return a}).catch(d.exception)})}}});
//# sourceMappingURL=actions.min.js.map
