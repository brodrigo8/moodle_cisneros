define ("report_insights/actions",["jquery","core/str","core/ajax","core/notification","core/url","core/modal_factory","core/modal_events"],function(a,b,c,d,e,f,g){return{initBulk:function initBulk(h){var i=function(a){return b.get_strings([{key:"noitemsselected",component:"report_insights"}]).then(function(b){return f.create({type:f.types.CANCEL,title:a,body:b[0]})}).then(function(a){a.show();return a}).catch(d.exception)},j=function(b,f,g){return c.call([{methodname:"report_insights_action_executed",args:{predictionids:b,actionname:g}}])[0].then(function(){var b=!1;f.forEach(function(a){if(!1===b){b=a.closest("table")}a.remove()});if(0===b.find("tbody").length){var c={contextid:b.closest("div.insight-container").data("context-id"),modelid:b.closest("div.insight-container").data("model-id")};window.location.assign(e.relativeUrl("report/insights/insights.php?"+a.param(c)))}}).catch(d.exception)};a(h+" [data-bulk-actionname]").on("click",function(c){c.preventDefault();var e=a(c.currentTarget),h=e.data("bulk-actionname"),k=e.text().trim(),l=[],m=[];a(".insights-list input[data-togglegroup^=\"insight-bulk-action-\"][data-toggle=\"slave\"]:checked").each(function(){var b=a(this).closest("tbody[data-prediction-id]");m.push(b);l.push(b.data("prediction-id"))});if(0===l.length){return i(k)}var n=[];return b.get_strings([{key:"confirmbulkaction",component:"report_insights",param:{action:k,nitems:l.length}},{key:"confirm",component:"moodle"}]).then(function(a){n=a;return f.create({type:f.types.SAVE_CANCEL,title:k,body:n[0]})}).then(function(a){a.setSaveButtonText(n[1]);a.show();a.getRoot().on(g.save,function(){return j(l,m,h)});return a}).catch(d.exception)})}}});
//# sourceMappingURL=actions.min.js.map
