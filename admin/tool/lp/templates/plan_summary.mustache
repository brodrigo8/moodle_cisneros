{{!
    This file is part of Moodle - http://moodle.org/

    Moodle is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    Moodle is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with Moodle.  If not, see <http://www.gnu.org/licenses/>.
}}
{{!
    @template tool_lp/plan_summary

    Moodle template for the summary of a learning plan.

    Classes required for JS:
    * none

    Data attributes required for JS:
    * none

    Context variables required for this template:
    * plan - object The learning plan object.
    * competencies - array Containing competency data.
        * competency - object The competency data.
        * usercompetencyplan - object The user competency plan data.
        * usercompetency - object The user competency object.
}}
<div data-region="plan-page" data-id="{{plan.id}}" data-userid="{{plan.userid}}">
    <h2>
        <a href="plan.php?id={{plan.id}}">{{plan.name}}</a>
    </h2>
    <div data-region="plan-summary">
        <dl>
            <dt>{{#str}}status, tool_lp{{/str}}</dt>
            <dd>
                {{plan.statusname}}
            </dd>
            {{#plan.duedate}}
                <dt>{{#str}}duedate, tool_lp{{/str}}</dt>
                <dd>{{plan.duedateformatted}}</dd>
            {{/plan.duedate}}
            {{#plan.template}}
                <dt>{{#str}}template, tool_lp{{/str}}</dt>
                <dd>
                    {{plan.template.shortname}}
                </dd>
            {{/plan.template}}
            {{#description}}
                <dt>{{#str}}description{{/str}}</dt>
                <dd>{{{plan.description}}}</dd>
            {{/description}}
        </dl>
    </div>
    <div data-region="plan-competencies">
        <h3>{{#str}}learningplancompetencies, tool_lp{{/str}}</h3>
        <table class="generaltable fullwidth managecompetencies">
            <thead>
            <tr>
                <th scope="col">{{#str}}shortname, tool_lp{{/str}}</th>
                <th scope="col">{{#str}}rating, tool_lp{{/str}}</th>
                <th scope="col">{{#str}}proficient, tool_lp{{/str}}</th>
                {{^plan.iscompleted}}
                    <th scope="col">{{#str}}status, tool_lp{{/str}}</th>
                {{/plan.iscompleted}}
            </tr>
            </thead>
            <tbody class="drag-parentnode">
            {{#competencies}}
                <tr class="drag-samenode" data-node="user-competency" data-id="{{competency.id}}" data-competencyid="{{usercompetency.competencyid}}" data-userid="{{usercompetency.userid}}">
                    <td>
                        {{#plan.canbeedited}}
                            <span class="drag-handlecontainer pull-left"></span>
                        {{/plan.canbeedited}}
                        <a href="{{pluginbaseurl}}/user_competency_in_plan.php?competencyid={{competency.id}}&amp;userid={{plan.userid}}&amp;planid={{plan.id}}">{{competency.shortname}}</a>
                        <em>{{competency.idnumber}}</em>
                    </td>
                    {{#plan.iscompleted}}
                        <td>{{usercompetencyplan.gradename}}</td>
                        <td>{{usercompetencyplan.proficiencyname}}</td>
                    {{/plan.iscompleted}}
                    {{^plan.iscompleted}}
                        <td>{{usercompetency.gradename}}</td>
                        <td>{{usercompetency.proficiencyname}}</td>
                        <td>{{usercompetency.statusname}}</td>
                    {{/plan.iscompleted}}
                </tr>
            {{/competencies}}
            </tbody>
        </table>
    </div>
</div>
