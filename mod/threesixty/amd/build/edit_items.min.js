define(["jquery","core/templates","core/notification","core/ajax","core/str","mod_threesixty/question_bank","core/yui"],function(a,b,c,d,e,f){var g,h=function(a){g=a,this.registerEvents()};return h.refreshItemList=function(){var e=d.call([{methodname:"mod_threesixty_get_items",args:{threesixtyid:g}}]);e[0].done(function(d){var e={threesixtyid:g},f=[],h=d.items.length;a.each(d.items,function(a,b){var c=b;c.deletebutton=!0,c.moveupbutton=!1,c.movedownbutton=!1,c.type=b.typetext,h>1&&(1==b.position?c.movedownbutton=!0:b.position==h?c.moveupbutton=!0:b.position>1&&b.position<h&&(c.moveupbutton=!0,c.movedownbutton=!0)),f.push(c)}),e.allitems=f,b.render("mod_threesixty/list_360_items",e).done(function(c,d){a('[data-region="itemlist"]').replaceWith(c),b.runTemplateJS(d)}).fail(c.exception)}).fail(c.exception)},h.prototype.registerEvents=function(){a("#btn-question-bank").click(function(a){a.preventDefault(),new f(g)}),a(".delete-item-button").click(function(b){b.preventDefault();var e=a(this).data("itemid"),f=d.call([{methodname:"mod_threesixty_delete_item",args:{itemid:e}}]);f[0].done(function(a){h.refreshItemList()}).fail(c.exception)}),a(".move-item-up-button").click(function(b){b.preventDefault();var e=a(this).data("itemid"),f=d.call([{methodname:"mod_threesixty_move_item_up",args:{itemid:e}}]);f[0].done(function(a){h.refreshItemList()}).fail(c.exception)}),a(".move-item-down-button").click(function(b){b.preventDefault();var e=a(this).data("itemid"),f=d.call([{methodname:"mod_threesixty_move_item_down",args:{itemid:e}}]);f[0].done(function(a){h.refreshItemList()}).fail(c.exception)})},h});