{"version":3,"file":"user_picker.min.js","sources":["../../../../../src/local/grades/local/grader/user_picker.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * This module will tie together all of the different calls the gradable module will make.\n *\n * @module     mod_forum/local/grades/local/grader/user_picker\n * @copyright  2019 Mathew May <mathew.solutions>\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\nimport Templates from 'core/templates';\nimport Selectors from './user_picker/selectors';\nimport {get_string as getString} from 'core/str';\n\nconst templatePath = 'mod_forum/local/grades/local/grader';\n\n/**\n * The Grader User Picker.\n *\n * @class mod_forum/local/grades/local/grader/user_picker\n */\nclass UserPicker {\n\n    /**\n     * Constructor for the User Picker.\n     *\n     * @constructor mod_forum/local/grades/local/grader/user_picker\n     * @param {Array} userList List of users\n     * @param {Function} showUserCallback The callback used to display the user\n     * @param {Function} preChangeUserCallback The callback to use before changing user\n     */\n    constructor(userList, showUserCallback, preChangeUserCallback) {\n        this.userList = userList;\n        this.showUserCallback = showUserCallback;\n        this.preChangeUserCallback = preChangeUserCallback;\n        this.currentUserIndex = 0;\n\n        // Ensure that render is bound correctly.\n        this.render = this.render.bind(this);\n        this.setUserId = this.setUserId.bind(this);\n    }\n\n    /**\n     * Set the current userid without rendering the change.\n     * To show the user, call showUser too.\n     *\n     * @param {Number} userId\n     */\n    setUserId(userId) {\n        // Determine the current index based on the user ID.\n        const userIndex = this.userList.findIndex(user => {\n            return user.id === parseInt(userId);\n        });\n\n        if (userIndex === -1) {\n            throw Error(`User with id ${userId} not found`);\n        }\n\n        this.currentUserIndex = userIndex;\n    }\n\n    /**\n     * Render the user picker.\n     */\n    async render() {\n        // Create the root node.\n        this.root = document.createElement('div');\n\n        const {html, js} = await this.renderNavigator();\n        Templates.replaceNodeContents(this.root, html, js);\n\n        // Call the showUser function to show the first user immediately.\n        await this.showUser(this.currentUser);\n\n        // Ensure that the event listeners are all bound.\n        this.registerEventListeners();\n    }\n\n    /**\n     * Render the navigator itself.\n     *\n     * @returns {Promise}\n     */\n    renderNavigator() {\n        return Templates.renderForPromise(`${templatePath}/user_picker`, {});\n    }\n\n    /**\n     * Render the current user details for the picker.\n     *\n     * @param {Object} context The data used to render the user picker.\n     * @returns {Promise}\n     */\n    renderUserChange(context) {\n        return Templates.renderForPromise(`${templatePath}/user_picker/user`, context);\n    }\n\n    /**\n     * Show the specified user in the picker.\n     *\n     * @param {Object} user\n     */\n    async showUser(user) {\n        const [{html, js}] = await Promise.all([this.renderUserChange(user), this.showUserCallback(user)]);\n        const userRegion = this.root.querySelector(Selectors.regions.userRegion);\n        Templates.replaceNodeContents(userRegion, html, js);\n\n        // Update the hidden now-grading region so screen readers can announce the user that's currently being graded.\n        const currentUserRegion = this.root.querySelector(Selectors.regions.currentUser);\n        currentUserRegion.textContent = await getString('nowgradinguser', 'mod_forum', user.fullname);\n    }\n\n    /**\n     * Register the event listeners for the user picker.\n     */\n    registerEventListeners() {\n        this.root.addEventListener('click', async(e) => {\n            const button = e.target.closest(Selectors.actions.changeUser);\n\n            if (button) {\n                const result = await this.preChangeUserCallback(this.currentUser);\n\n                if (!result.failed) {\n                    this.updateIndex(parseInt(button.dataset.direction));\n                    await this.showUser(this.currentUser);\n                }\n            }\n        });\n    }\n\n    /**\n     * Update the current user index.\n     *\n     * @param {Number} direction\n     * @returns {Number}}\n     */\n    updateIndex(direction) {\n        this.currentUserIndex += direction;\n\n        // Loop around the edges.\n        if (this.currentUserIndex < 0) {\n            this.currentUserIndex = this.userList.length - 1;\n        } else if (this.currentUserIndex > this.userList.length - 1) {\n            this.currentUserIndex = 0;\n        }\n\n        return this.currentUserIndex;\n    }\n\n    /**\n     * Get the details of the user currently shown with the total number of users, and the 1-indexed count of the\n     * current user.\n     *\n     * @returns {Object}\n     */\n    get currentUser() {\n        return {\n            ...this.userList[this.currentUserIndex],\n            total: this.userList.length,\n            displayIndex: this.currentUserIndex + 1,\n        };\n    }\n\n    /**\n     * Get the root node for the User Picker.\n     *\n     * @returns {HTMLElement}\n     */\n    get rootNode() {\n        return this.root;\n    }\n}\n\n/**\n * Create a new user picker.\n *\n * @param {Array} users The list of users\n * @param {Function} showUserCallback The function to call to show a specific user\n * @param {Function} preChangeUserCallback The fucntion to call to save the grade for the current user\n * @param {Number} [currentUserID] The userid of the current user\n * @returns {UserPicker}\n */\nexport default async(\n    users,\n    showUserCallback,\n    preChangeUserCallback,\n    {\n        initialUserId = null,\n    } = {}\n) => {\n    const userPicker = new UserPicker(users, showUserCallback, preChangeUserCallback);\n    if (initialUserId) {\n        userPicker.setUserId(initialUserId);\n    }\n    await userPicker.render();\n\n    return userPicker;\n};\n"],"names":["_interopRequireDefault","obj","__esModule","default","_typeof","Symbol","iterator","constructor","prototype","ownKeys","object","enumerableOnly","keys","Object","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","target","i","arguments","length","source","forEach","key","_defineProperty","getOwnPropertyDescriptors","defineProperties","defineProperty","value","_toPropertyKey","configurable","writable","_slicedToArray","arr","Array","isArray","_arrayWithHoles","_i","_s","_e","_x","_r","_arr","_n","_d","call","next","done","err","return","_iterableToArrayLimit","o","minLen","_arrayLikeToArray","n","toString","slice","name","from","test","_unsupportedIterableToArray","TypeError","_nonIterableRest","len","arr2","_regeneratorRuntime","exports","Op","hasOwn","hasOwnProperty","desc","$Symbol","iteratorSymbol","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","toStringTag","define","wrap","innerFn","outerFn","self","tryLocsList","protoGenerator","Generator","generator","create","context","Context","makeInvokeMethod","tryCatch","fn","arg","type","ContinueSentinel","GeneratorFunction","GeneratorFunctionPrototype","IteratorPrototype","this","getProto","getPrototypeOf","NativeIteratorPrototype","values","Gp","defineIteratorMethods","method","_invoke","AsyncIterator","PromiseImpl","invoke","resolve","reject","record","result","__await","then","unwrapped","error","previousPromise","callInvokeWithMethodAndArg","state","Error","doneResult","delegate","delegateResult","maybeInvokeDelegate","sent","_sent","dispatchException","abrupt","methodName","undefined","info","resultName","nextLoc","pushTryEntry","locs","entry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","resetTryEntry","completion","reset","iterable","iteratorMethod","isNaN","displayName","isGeneratorFunction","genFun","ctor","mark","setPrototypeOf","__proto__","awrap","async","Promise","iter","val","reverse","pop","skipTempReset","prev","charAt","stop","rootRecord","rval","exception","handle","loc","caught","hasCatch","hasFinally","finallyEntry","complete","finish","catch","thrown","delegateYield","asyncGeneratorStep","gen","_next","_throw","_asyncToGenerator","args","_defineProperties","props","descriptor","input","hint","prim","toPrimitive","res","String","Number","_toPrimitive","_templates","_selectors","_ref2","UserPicker","userList","showUserCallback","preChangeUserCallback","instance","Constructor","_classCallCheck","currentUserIndex","render","bind","setUserId","protoProps","staticProps","_showUser","_render","userId","userIndex","findIndex","user","id","parseInt","_callee","_yield$this$renderNav","html","js","_context","root","document","createElement","renderNavigator","Templates","replaceNodeContents","showUser","currentUser","registerEventListeners","renderForPromise","concat","_yield$Promise$all","_yield$Promise$all2","_yield$Promise$all2$","userRegion","currentUserRegion","_context2","all","renderUserChange","querySelector","Selectors","regions","getString","get_string","fullname","textContent","_callee2","_ref","_this","addEventListener","e","button","_context3","closest","actions","changeUser","failed","updateIndex","dataset","direction","_callee3","_x2","get","total","displayIndex","_default","users","_ref3","_ref3$initialUserId","initialUserId","userPicker","_args4","_context4","_callee4","_x3","_x4","_x5","_exports"],"mappings":"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"}