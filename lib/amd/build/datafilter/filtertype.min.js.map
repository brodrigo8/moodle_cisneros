{"version":3,"file":"filtertype.min.js","sources":["../../src/datafilter/filtertype.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Base Filter class for a filter type in the filter UI.\n *\n * @module     core/datafilter/filtertype\n * @copyright  2020 Andrew Nicols <andrew@nicols.co.uk>\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\nimport Autocomplete from 'core/form-autocomplete';\nimport Selectors from 'core/datafilter/selectors';\nimport {get_string as getString} from 'core/str';\n\n/**\n * Fetch all checked options in the select.\n *\n * This is a poor-man's polyfill for select.selectedOptions, which is not available in IE11.\n *\n * @param {HTMLSelectElement} select\n * @returns {HTMLOptionElement[]} All selected options\n */\nconst getOptionsForSelect = select => {\n    return select.querySelectorAll(':checked');\n};\n\nexport default class {\n\n    /**\n     * Constructor for a new filter.\n     *\n     * @param {String} filterType The type of filter that this relates to\n     * @param {HTMLElement} rootNode The root node for the participants filterset\n     * @param {Array} initialValues The initial values for the selector\n     */\n    constructor(filterType, rootNode, initialValues) {\n        this.filterType = filterType;\n        this.rootNode = rootNode;\n\n        this.addValueSelector(initialValues);\n    }\n\n    /**\n     * Perform any tear-down for this filter type.\n     */\n    tearDown() {\n        // eslint-disable-line no-empty-function\n    }\n\n    /**\n     * Get the placeholder to use when showing the value selector.\n     *\n     * @return {Promise} Resolving to a String\n     */\n    get placeholder() {\n        return getString('placeholdertypeorselect', 'core');\n    }\n\n    /**\n     * Whether to show suggestions in the autocomplete.\n     *\n     * @return {Boolean}\n     */\n    get showSuggestions() {\n        return true;\n    }\n\n    /**\n     * Add the value selector to the filter row.\n     *\n     * @param {Array} initialValues\n     */\n    async addValueSelector(initialValues = []) {\n        const filterValueNode = this.getFilterValueNode();\n\n        // Copy the data in place.\n        const sourceDataNode = this.getSourceDataForFilter();\n        if (!sourceDataNode) {\n            return;\n        }\n        filterValueNode.innerHTML = sourceDataNode.outerHTML;\n\n        const dataSource = filterValueNode.querySelector('select');\n\n        // Set an ID for this filter value element.\n        dataSource.id = 'filter-value-' + dataSource.getAttribute('data-field-name');\n\n        // Create a hidden label for the filter value.\n        const filterValueLabel = document.createElement('label');\n        filterValueLabel.setAttribute('for', dataSource.id);\n        filterValueLabel.classList.add('sr-only');\n        filterValueLabel.innerText = dataSource.getAttribute('data-field-title');\n\n        // Append this label to the filter value container.\n        filterValueNode.appendChild(filterValueLabel);\n\n        // If there are any initial values then attempt to apply them.\n        initialValues.forEach(filterValue => {\n            let selectedOption = dataSource.querySelector(`option[value=\"${filterValue}\"]`);\n            if (selectedOption) {\n                selectedOption.selected = true;\n            } else if (!this.showSuggestions) {\n                selectedOption = document.createElement('option');\n                selectedOption.value = filterValue;\n                selectedOption.innerHTML = filterValue;\n                selectedOption.selected = true;\n\n                dataSource.append(selectedOption);\n            }\n        });\n\n        Autocomplete.enhance(\n            // The source select element.\n            dataSource,\n\n            // Whether to allow 'tags' (custom entries).\n            dataSource.dataset.allowCustom == \"1\",\n\n            // We do not require AJAX at all as standard.\n            null,\n\n            // The string to use as a placeholder.\n            await this.placeholder,\n\n            // Disable case sensitivity on searches.\n            false,\n\n            // Show suggestions.\n            this.showSuggestions,\n\n            // Do not override the 'no suggestions' string.\n            null,\n\n            // Close the suggestions if this is not a multi-select.\n            !dataSource.multiple,\n\n            // Template overrides.\n            {\n                items: 'core/datafilter/autocomplete_selection_items',\n                layout: 'core/datafilter/autocomplete_layout',\n                selection: 'core/datafilter/autocomplete_selection',\n            }\n        );\n    }\n\n    /**\n     * Get the root node for this filter.\n     *\n     * @returns {HTMLElement}\n     */\n    get filterRoot() {\n        return this.rootNode.querySelector(Selectors.filter.byName(this.filterType));\n    }\n\n    /**\n     * Get the possible data for this filter type.\n     *\n     * @returns {Array}\n     */\n    getSourceDataForFilter() {\n        const filterDataNode = this.rootNode.querySelector(Selectors.filterset.regions.datasource);\n\n        return filterDataNode.querySelector(Selectors.data.fields.byName(this.filterType));\n    }\n\n    /**\n     * Get the HTMLElement which contains the value selector.\n     *\n     * @returns {HTMLElement}\n     */\n    getFilterValueNode() {\n        return this.filterRoot.querySelector(Selectors.filter.regions.values);\n    }\n\n    /**\n     * Get the name of this filter.\n     *\n     * @returns {String}\n     */\n    get name() {\n        return this.filterType;\n    }\n\n    /**\n     * Get the type of join specified.\n     *\n     * @returns {Number}\n     */\n    get jointype() {\n        return parseInt(this.filterRoot.querySelector(Selectors.filter.fields.join).value, 10);\n    }\n\n    /**\n     * Get the list of raw values for this filter type.\n     *\n     * @returns {Array}\n     */\n    get rawValues() {\n        const filterValueNode = this.getFilterValueNode();\n        const filterValueSelect = filterValueNode.querySelector('select');\n\n        return Object.values(getOptionsForSelect(filterValueSelect)).map(option => option.value);\n    }\n\n    /**\n     * Get the list of values for this filter type.\n     *\n     * @returns {Array}\n     */\n    get values() {\n        return this.rawValues.map(option => parseInt(option, 10));\n    }\n\n    /**\n     * Get the composed value for this filter.\n     *\n     * @returns {Object}\n     */\n    get filterValue() {\n        return {\n            name: this.name,\n            jointype: this.jointype,\n            values: this.values,\n        };\n    }\n}\n"],"names":["_interopRequireDefault","obj","__esModule","default","_typeof","Symbol","iterator","constructor","prototype","_regeneratorRuntime","exports","Op","Object","hasOwn","hasOwnProperty","defineProperty","key","desc","value","$Symbol","iteratorSymbol","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","toStringTag","define","enumerable","configurable","writable","err","wrap","innerFn","outerFn","self","tryLocsList","protoGenerator","Generator","generator","create","context","Context","makeInvokeMethod","tryCatch","fn","arg","type","call","ContinueSentinel","GeneratorFunction","GeneratorFunctionPrototype","IteratorPrototype","this","getProto","getPrototypeOf","NativeIteratorPrototype","values","Gp","defineIteratorMethods","forEach","method","_invoke","AsyncIterator","PromiseImpl","invoke","resolve","reject","record","result","__await","then","unwrapped","error","previousPromise","callInvokeWithMethodAndArg","state","Error","doneResult","delegate","delegateResult","maybeInvokeDelegate","sent","_sent","dispatchException","abrupt","done","methodName","undefined","return","TypeError","info","resultName","next","nextLoc","pushTryEntry","locs","entry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","push","resetTryEntry","completion","reset","iterable","iteratorMethod","isNaN","length","i","displayName","isGeneratorFunction","genFun","ctor","name","mark","setPrototypeOf","__proto__","awrap","async","Promise","iter","keys","val","object","reverse","pop","skipTempReset","prev","charAt","slice","stop","rootRecord","rval","exception","handle","loc","caught","hasCatch","hasFinally","finallyEntry","complete","finish","catch","thrown","delegateYield","asyncGeneratorStep","gen","_next","_throw","_defineProperties","target","props","descriptor","input","hint","prim","toPrimitive","res","String","Number","_toPrimitive","_formAutocomplete","_selectors","_default","filterType","rootNode","initialValues","instance","Constructor","_classCallCheck","addValueSelector","protoProps","staticProps","_addValueSelector","get","getString","get_string","_callee","filterValueNode","sourceDataNode","dataSource","filterValueLabel","_this","_args","arguments","_context","getFilterValueNode","getSourceDataForFilter","innerHTML","outerHTML","querySelector","id","getAttribute","document","createElement","setAttribute","classList","add","innerText","appendChild","filterValue","selectedOption","concat","selected","showSuggestions","append","t0","Autocomplete","t1","t2","dataset","allowCustom","placeholder","t3","t4","t5","multiple","t6","items","layout","selection","enhance","args","apply","Selectors","filter","byName","filterset","regions","datasource","data","fields","filterRoot","parseInt","join","select","filterValueSelect","querySelectorAll","map","option","rawValues","jointype","_exports"],"mappings":"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"}