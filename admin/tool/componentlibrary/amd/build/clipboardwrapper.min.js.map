{"version":3,"sources":["../src/clipboardwrapper.js"],"names":["clipboardWrapper","key","component","strings","Templates","renderForPromise","html","js","document","querySelectorAll","selectors","clipboardcontent","forEach","element","prependNodeContents","clClipboard","Clipboard","clipboardbutton","target","trigger","parentNode","nextElementSibling","on","e","tooltip","tooltipBtn","Tooltip","setAttribute","show","setTimeout","dispose","clearSelection"],"mappings":"sTAwBA,OACA,OACA,OAEA,OACA,O,kXAKO,GAAMA,CAAAA,CAAgB,4CAAG,2HACN,kBAAW,CAC7B,CACIC,GAAG,CAAE,QADT,CAEIC,SAAS,CAAE,uBAFf,CAD6B,CAK7B,CACID,GAAG,CAAE,iBADT,CAEIC,SAAS,CAAE,uBAFf,CAL6B,CAAX,CADM,QACtBC,CADsB,uBAYHC,WAAUC,gBAAV,CAA2B,uCAA3B,CAAoE,EAApE,CAZG,iBAYrBC,CAZqB,GAYrBA,IAZqB,CAYfC,CAZe,GAYfA,EAZe,CAa5BC,QAAQ,CAACC,gBAAT,CAA0BC,UAAUC,gBAApC,EACKC,OADL,CACa,SAAAC,CAAO,CAAI,CAChBT,UAAUU,mBAAV,CAA8BD,CAA9B,CAAuCP,CAAvC,CAA6CC,CAA7C,CACH,CAHL,EAKMQ,CAlBsB,CAkBR,GAAIC,UAAJ,CAAcN,UAAUO,eAAxB,CAAyC,CACzDC,MAAM,CAAE,gBAACC,CAAD,CAAa,CACjB,MAAOA,CAAAA,CAAO,CAACC,UAAR,CAAmBC,kBAC7B,CAHwD,CAAzC,CAlBQ,CAwB5BN,CAAW,CAACO,EAAZ,CAAe,SAAf,CAA0B,SAAAC,CAAC,CAAI,CAE3B,cAAEA,CAAC,CAACJ,OAAJ,EAAaK,OAAb,CAAqB,SAArB,EAGA,GAAMC,CAAAA,CAAU,CAAG,GAAIC,UAAJ,CAAYH,CAAC,CAACJ,OAAd,CAAnB,CACAI,CAAC,CAACJ,OAAF,CAAUQ,YAAV,CAAuB,qBAAvB,CAA8CxB,CAAO,CAAC,CAAD,CAArD,EACAsB,CAAU,CAACG,IAAX,GACAC,UAAU,CAAC,UAAM,CACbJ,CAAU,CAACK,OAAX,EACH,CAFS,CAEP,GAFO,CAAV,CAGAP,CAAC,CAACQ,cAAF,GACAR,CAAC,CAACJ,OAAF,CAAUQ,YAAV,CAAuB,qBAAvB,CAA8CxB,CAAO,CAAC,CAAD,CAArD,CACH,CAbD,EAxB4B,yCAAH,uDAAtB,C","sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Interface to using clipboard.js\n *\n * @module     tool_componentlibrary/clipboardwrapper\n * @package    tool_componentlibrary\n * @copyright  2021 Bas Brands <bas@moodle.com>\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\nimport Tooltip from 'theme_boost/bootstrap/tooltip';\nimport $ from 'jquery';\nimport Clipboard from 'tool_componentlibrary/clipboard';\nimport {get_strings as getStrings} from 'core/str';\nimport selectors from 'tool_componentlibrary/selectors';\nimport Templates from 'core/templates';\n\n/**\n * Initialise the clipboard button on all reusable code.\n */\nexport const clipboardWrapper = async() => {\n    const strings = await getStrings([\n        {\n            key: 'copied',\n            component: 'tool_componentlibrary'\n        },\n        {\n            key: 'copytoclipboard',\n            component: 'tool_componentlibrary'\n        },\n    ]);\n\n    const {html, js} = await Templates.renderForPromise('tool_componentlibrary/clipboardbutton', {});\n    document.querySelectorAll(selectors.clipboardcontent)\n        .forEach(element => {\n            Templates.prependNodeContents(element, html, js);\n        });\n\n    const clClipboard = new Clipboard(selectors.clipboardbutton, {\n        target: (trigger) => {\n            return trigger.parentNode.nextElementSibling;\n        }\n    });\n\n    clClipboard.on('success', e => {\n        // Hide the original tooltip\n        $(e.trigger).tooltip('dispose');\n\n        // Show an new tooltip with the Copied string.\n        const tooltipBtn = new Tooltip(e.trigger);\n        e.trigger.setAttribute('data-original-title', strings[0]);\n        tooltipBtn.show();\n        setTimeout(() => {\n            tooltipBtn.dispose();\n        }, 3000);\n        e.clearSelection();\n        e.trigger.setAttribute('data-original-title', strings[1]);\n    });\n};\n"],"file":"clipboardwrapper.min.js"}