define(["jquery","core/templates","core/notification","core/ajax","core/str","core/modal_factory","core/modal_events"],function(a,b,c,d,e,f,g){function h(){var e=d.call([{methodname:"mod_threesixty_data_for_participant_list",args:{threesixtyid:j}}]);e[0].done(function(d){b.render("mod_threesixty/list_participants",d).done(function(c,d){a('[data-region="participantlist"]').replaceWith(c),b.runTemplateJS(d)}).fail(c.exception)}).fail(c.exception);var e=d.call([{methodname:method,args:data}])}function i(b,e){k?(k.setBody(e),k.show()):f.create({title:b,body:e,large:!0,type:f.types.SAVE_CANCEL}).done(function(b){k=b,k.show(),b.getRoot().on(g.hidden,function(){b.setBody("")}),b.getRoot().on(g.save,function(){var b=a("#decline-statusid").val(),e=a("#decline-reason").val().trim(),f={statusid:b,declinereason:e},g="mod_threesixty_decline_feedback",i=d.call([{methodname:g,args:f}]);i[0].done(function(){h()}).fail(c.exception)})})}var j,k,l=function(a){j=a,this.registerEvents()};return l.prototype.registerEvents=function(){a(".decline-feedback-button").click(function(){var d=a(this).data("statusid"),f=a(this).data("name"),g={statusid:d,name:f},h=b.render("mod_threesixty/decline_feedback",g);e.get_string("declinefeedback","mod_threesixty").done(function(a){i(a,h)}).fail(c.exception)})},l});