{"version":3,"file":"modalform.min.js","sources":["../src/modalform.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Display a form in a modal dialogue\n *\n * Example:\n *    import ModalForm from 'core_form/modalform';\n *\n *    const modalForm = new ModalForm({\n *        formClass: 'pluginname\\\\form\\\\formname',\n *        modalConfig: {title: 'Here comes the title'},\n *        args: {categoryid: 123},\n *        returnFocus: e.target,\n *    });\n *    modalForm.addEventListener(modalForm.events.FORM_SUBMITTED, (c) => window.console.log(c.detail));\n *    modalForm.show();\n *\n * See also https://docs.moodle.org/dev/Modal_and_AJAX_forms\n *\n * @module     core_form/modalform\n * @copyright  2018 Mitxel Moriana <mitxel@tresipunt.>\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\nimport Ajax from 'core/ajax';\nimport * as FormChangeChecker from 'core_form/changechecker';\nimport * as FormEvents from 'core_form/events';\nimport Fragment from 'core/fragment';\nimport ModalEvents from 'core/modal_events';\nimport ModalFactory from 'core/modal_factory';\nimport Notification from 'core/notification';\nimport Pending from 'core/pending';\nimport {serialize} from './util';\n\nexport default class ModalForm {\n\n    /**\n     * Various events that can be observed.\n     *\n     * @type {Object}\n     */\n    events = {\n        // Form was successfully submitted - the response is passed to the event listener.\n        // Cancellable (but it's hardly ever needed to cancel this event).\n        FORM_SUBMITTED: 'core_form_modalform_formsubmitted',\n        // Cancel button was pressed.\n        // Cancellable (but it's hardly ever needed to cancel this event).\n        FORM_CANCELLED: 'core_form_modalform_formcancelled',\n        // User attempted to submit the form but there was client-side validation error.\n        CLIENT_VALIDATION_ERROR: 'core_form_modalform_clientvalidationerror',\n        // User attempted to submit the form but server returned validation error.\n        SERVER_VALIDATION_ERROR: 'core_form_modalform_validationerror',\n        // Error occurred while performing request to the server.\n        // Cancellable (by default calls Notification.exception).\n        ERROR: 'core_form_modalform_error',\n        // Right after user pressed no-submit button,\n        // listen to this event if you want to add JS validation or processing for no-submit button.\n        // Cancellable.\n        NOSUBMIT_BUTTON_PRESSED: 'core_form_modalform_nosubmitbutton',\n        // Right after user pressed submit button,\n        // listen to this event if you want to add additional JS validation or confirmation dialog.\n        // Cancellable.\n        SUBMIT_BUTTON_PRESSED: 'core_form_modalform_submitbutton',\n        // Right after user pressed cancel button,\n        // listen to this event if you want to add confirmation dialog.\n        // Cancellable.\n        CANCEL_BUTTON_PRESSED: 'core_form_modalform_cancelbutton',\n        // Modal was loaded and this.modal is available (but the form content may not be loaded yet).\n        LOADED: 'core_form_modalform_loaded',\n    };\n\n    /**\n     * Constructor\n     *\n     * Shows the required form inside a modal dialogue\n     *\n     * @param {Object} config parameters for the form and modal dialogue:\n     * @paramy {String} config.formClass PHP class name that handles the form (should extend \\core_form\\modal )\n     * @paramy {Object} config.modalConfig modal config - title, type, etc.\n     *              Default: {removeOnClose: true, type: ModalFactory.types.SAVE_CANCEL}\n     * @paramy {Object} config.args Arguments for the initial form rendering (for example, id of the edited entity)\n     * @paramy {String} config.saveButtonText the text to display on the Modal \"Save\" button (optional)\n     * @paramy {String} config.saveButtonClasses additional CSS classes for the Modal \"Save\" button\n     * @paramy {HTMLElement} config.returnFocus element to return focus to after the dialogue is closed\n     */\n    constructor(config) {\n        this.modal = null;\n        this.config = config;\n        this.config.modalConfig = {\n            removeOnClose: true,\n            type: ModalFactory.types.SAVE_CANCEL,\n            large: true,\n            ...(this.config.modalConfig || {}),\n        };\n        this.config.args = this.config.args || {};\n        this.futureListeners = [];\n    }\n\n    /**\n     * Initialise the modal and shows it\n     *\n     * @return {Promise}\n     */\n    show() {\n        const pendingPromise = new Pending('core_form/modalform:init');\n\n        return ModalFactory.create(this.config.modalConfig)\n        .then((modal) => {\n            this.modal = modal;\n\n            // Retrieve the form and set the modal body. We can not set the body in the modalConfig,\n            // we need to make sure that the modal already exists when we render the form. Some form elements\n            // such as date_selector inspect the existing elements on the page to find the highest z-index.\n            const formParams = serialize(this.config.args || {});\n            const bodyContent = this.getBody(formParams);\n            this.modal.setBodyContent(bodyContent);\n            bodyContent.catch(Notification.exception);\n\n            // After successfull submit, when we press \"Cancel\" or close the dialogue by clicking on X in the top right corner.\n            this.modal.getRoot().on(ModalEvents.hidden, () => {\n                this.notifyResetFormChanges();\n                this.modal.destroy();\n                // Focus on the element that actually launched the modal.\n                if (this.config.returnFocus) {\n                    this.config.returnFocus.focus();\n                }\n            });\n\n            // Add the class to the modal dialogue.\n            this.modal.getModal().addClass('modal-form-dialogue');\n\n            // We catch the press on submit buttons in the forms.\n            this.modal.getRoot().on('click', 'form input[type=submit][data-no-submit]',\n                (e) => {\n                    e.preventDefault();\n                    const event = this.trigger(this.events.NOSUBMIT_BUTTON_PRESSED, e.target);\n                    if (!event.defaultPrevented) {\n                        this.processNoSubmitButton(e.target);\n                    }\n                });\n\n            // We catch the form submit event and use it to submit the form with ajax.\n            this.modal.getRoot().on('submit', 'form', (e) => {\n                e.preventDefault();\n                const event = this.trigger(this.events.SUBMIT_BUTTON_PRESSED);\n                if (!event.defaultPrevented) {\n                    this.submitFormAjax();\n                }\n            });\n\n            // Change the text for the save button.\n            if (typeof this.config.saveButtonText !== 'undefined' &&\n                typeof this.modal.setSaveButtonText !== 'undefined') {\n                this.modal.setSaveButtonText(this.config.saveButtonText);\n            }\n            // Set classes for the save button.\n            if (typeof this.config.saveButtonClasses !== 'undefined') {\n                this.setSaveButtonClasses(this.config.saveButtonClasses);\n            }\n            // When Save button is pressed - submit the form.\n            this.modal.getRoot().on(ModalEvents.save, (e) => {\n                e.preventDefault();\n                this.modal.getRoot().find('form').submit();\n            });\n\n            // When Cancel button is pressed - allow to intercept.\n            this.modal.getRoot().on(ModalEvents.cancel, (e) => {\n                const event = this.trigger(this.events.CANCEL_BUTTON_PRESSED);\n                if (event.defaultPrevented) {\n                    e.preventDefault();\n                }\n            });\n            this.futureListeners.forEach(args => this.modal.getRoot()[0].addEventListener(...args));\n            this.futureListeners = [];\n            this.trigger(this.events.LOADED, null, false);\n            return this.modal.show();\n        })\n        .then(pendingPromise.resolve);\n    }\n\n    /**\n     * Triggers a custom event\n     *\n     * @private\n     * @param {String} eventName\n     * @param {*} detail\n     * @param {Boolean} cancelable\n     * @return {CustomEvent<unknown>}\n     */\n    trigger(eventName, detail = null, cancelable = true) {\n        const e = new CustomEvent(eventName, {detail, cancelable});\n        this.modal.getRoot()[0].dispatchEvent(e);\n        return e;\n    }\n\n    /**\n     * Add listener for an event\n     *\n     * @param {array} args\n     * @example:\n     *    const modalForm = new ModalForm(...);\n     *    dynamicForm.addEventListener(modalForm.events.FORM_SUBMITTED, e => {\n     *        window.console.log(e.detail);\n     *    });\n     */\n    addEventListener(...args) {\n        if (!this.modal) {\n            this.futureListeners.push(args);\n        } else {\n            this.modal.getRoot()[0].addEventListener(...args);\n        }\n    }\n\n    /**\n     * Get form contents (to be used in ModalForm.setBodyContent())\n     *\n     * @param {String} formDataString form data in format of a query string\n     * @method getBody\n     * @private\n     * @return {Promise}\n     */\n    getBody(formDataString) {\n        const params = {\n            formdata: formDataString,\n            form: this.config.formClass\n        };\n        const pendingPromise = new Pending('core_form/modalform:form_body');\n        return Ajax.call([{\n            methodname: 'core_form_dynamic_form',\n            args: params\n        }])[0]\n        .then(response => {\n            pendingPromise.resolve();\n            return {html: response.html, js: Fragment.processCollectedJavascript(response.javascript)};\n        });\n    }\n\n    /**\n     * On exception during form processing. Caller may override\n     *\n     * @param {Object} exception\n     */\n    onSubmitError(exception) {\n        const event = this.trigger(this.events.ERROR, exception);\n        if (event.defaultPrevented) {\n            return;\n        }\n\n        Notification.exception(exception);\n    }\n\n    /**\n     * Notifies listeners that form dirty state should be reset.\n     *\n     * @fires event:formSubmittedByJavascript\n     */\n    notifyResetFormChanges() {\n        const form = this.getFormNode();\n        if (!form) {\n            return;\n        }\n\n        FormEvents.notifyFormSubmittedByJavascript(form, true);\n\n        FormChangeChecker.resetFormDirtyState(form);\n    }\n\n    /**\n     * Get the form node from the Dialogue.\n     *\n     * @returns {HTMLFormElement}\n     */\n    getFormNode() {\n        return this.modal.getRoot().find('form')[0];\n    }\n\n    /**\n     * Click on a \"submit\" button that is marked in the form as registerNoSubmitButton()\n     *\n     * @param {Element} button button that was pressed\n     * @fires event:formSubmittedByJavascript\n     */\n    processNoSubmitButton(button) {\n        const form = this.getFormNode();\n        if (!form) {\n            return;\n        }\n\n        FormEvents.notifyFormSubmittedByJavascript(form, true);\n\n        // Add the button name to the form data and submit it.\n        let formData = this.modal.getRoot().find('form').serialize();\n        formData = formData + '&' + encodeURIComponent(button.getAttribute('name')) + '=' +\n            encodeURIComponent(button.getAttribute('value'));\n\n        const bodyContent = this.getBody(formData);\n        this.modal.setBodyContent(bodyContent);\n        bodyContent.catch(Notification.exception);\n    }\n\n    /**\n     * Validate form elements\n     * @return {Boolean} Whether client-side validation has passed, false if there are errors\n     * @fires event:formSubmittedByJavascript\n     */\n    validateElements() {\n        FormEvents.notifyFormSubmittedByJavascript(this.getFormNode());\n\n        // Now the change events have run, see if there are any \"invalid\" form fields.\n        /** @var {jQuery} list of elements with errors */\n        const invalid = this.modal.getRoot().find('[aria-invalid=\"true\"], .error');\n\n        // If we found invalid fields, focus on the first one and do not submit via ajax.\n        if (invalid.length) {\n            invalid.first().focus();\n            return false;\n        }\n\n        return true;\n    }\n\n    /**\n     * Disable buttons during form submission\n     */\n    disableButtons() {\n        this.modal.getFooter().find('[data-action]').attr('disabled', true);\n    }\n\n    /**\n     * Enable buttons after form submission (on validation error)\n     */\n    enableButtons() {\n        this.modal.getFooter().find('[data-action]').removeAttr('disabled');\n    }\n\n    /**\n     * Submit the form via AJAX call to the core_form_dynamic_form WS\n     */\n    async submitFormAjax() {\n        // If we found invalid fields, focus on the first one and do not submit via ajax.\n        if (!this.validateElements()) {\n            this.trigger(this.events.CLIENT_VALIDATION_ERROR, null, false);\n            return;\n        }\n        this.disableButtons();\n\n        // Convert all the form elements values to a serialised string.\n        const form = this.modal.getRoot().find('form');\n        const formData = form.serialize();\n\n        // Now we can continue...\n        Ajax.call([{\n            methodname: 'core_form_dynamic_form',\n            args: {\n                formdata: formData,\n                form: this.config.formClass\n            }\n        }])[0]\n        .then((response) => {\n            if (!response.submitted) {\n                // Form was not submitted because validation failed.\n                const promise = new Promise(\n                    resolve => resolve({html: response.html, js: Fragment.processCollectedJavascript(response.javascript)}));\n                this.modal.setBodyContent(promise);\n                this.enableButtons();\n                this.trigger(this.events.SERVER_VALIDATION_ERROR);\n            } else {\n                // Form was submitted properly. Hide the modal and execute callback.\n                const data = JSON.parse(response.data);\n                FormChangeChecker.markFormSubmitted(form[0]);\n                const event = this.trigger(this.events.FORM_SUBMITTED, data);\n                if (!event.defaultPrevented) {\n                    this.modal.hide();\n                }\n            }\n            return null;\n        })\n        .catch(exception => this.onSubmitError(exception));\n    }\n\n    /**\n     * Set the classes for the 'save' button.\n     *\n     * @method setSaveButtonClasses\n     * @param {(String)} value The 'save' button classes.\n     */\n    setSaveButtonClasses(value) {\n        const button = this.modal.getFooter().find(\"[data-action='save']\");\n        if (!button) {\n            throw new Error(\"Unable to find the 'save' button\");\n        }\n        button.removeClass().addClass(value);\n    }\n}\n"],"names":["_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","_interopRequireWildcard","obj","__esModule","_typeof","default","cache","has","get","newObj","hasPropertyDescriptor","Object","defineProperty","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","_interopRequireDefault","Symbol","iterator","constructor","_regeneratorRuntime","exports","Op","hasOwn","value","$Symbol","iteratorSymbol","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","toStringTag","define","enumerable","configurable","writable","err","wrap","innerFn","outerFn","self","tryLocsList","protoGenerator","Generator","generator","create","context","Context","makeInvokeMethod","tryCatch","fn","arg","type","ContinueSentinel","GeneratorFunction","GeneratorFunctionPrototype","IteratorPrototype","this","getProto","getPrototypeOf","NativeIteratorPrototype","values","Gp","defineIteratorMethods","forEach","method","_invoke","AsyncIterator","PromiseImpl","invoke","resolve","reject","record","result","__await","then","unwrapped","error","previousPromise","callInvokeWithMethodAndArg","state","Error","doneResult","delegate","delegateResult","maybeInvokeDelegate","sent","_sent","dispatchException","abrupt","done","methodName","undefined","return","TypeError","info","resultName","next","nextLoc","pushTryEntry","locs","entry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","push","resetTryEntry","completion","reset","iterable","iteratorMethod","isNaN","length","i","displayName","isGeneratorFunction","genFun","ctor","name","mark","setPrototypeOf","__proto__","awrap","async","Promise","iter","keys","val","object","reverse","pop","skipTempReset","prev","charAt","slice","stop","rootRecord","rval","exception","handle","loc","caught","hasCatch","hasFinally","finallyEntry","complete","finish","catch","thrown","delegateYield","asyncGeneratorStep","gen","_next","_throw","_toConsumableArray","arr","Array","isArray","_arrayLikeToArray","_arrayWithoutHoles","from","_iterableToArray","o","minLen","n","toString","test","_unsupportedIterableToArray","_nonIterableSpread","len","arr2","ownKeys","enumerableOnly","getOwnPropertySymbols","symbols","filter","sym","apply","_defineProperties","target","props","descriptor","_toPropertyKey","_defineProperty","input","hint","prim","toPrimitive","res","String","Number","_toPrimitive","_ajax","FormChangeChecker","FormEvents","_fragment","_modal_events","_modal_factory","_notification","_pending","ModalForm","config","instance","Constructor","_classCallCheck","FORM_SUBMITTED","FORM_CANCELLED","CLIENT_VALIDATION_ERROR","SERVER_VALIDATION_ERROR","ERROR","NOSUBMIT_BUTTON_PRESSED","SUBMIT_BUTTON_PRESSED","CANCEL_BUTTON_PRESSED","LOADED","modal","modalConfig","arguments","source","getOwnPropertyDescriptors","defineProperties","_objectSpread","removeOnClose","ModalFactory","types","SAVE_CANCEL","large","args","futureListeners","protoProps","staticProps","_submitFormAjax","_this","pendingPromise","Pending","formParams","serialize","bodyContent","getBody","setBodyContent","Notification","getRoot","on","ModalEvents","hidden","notifyResetFormChanges","destroy","returnFocus","focus","getModal","addClass","e","preventDefault","trigger","events","defaultPrevented","processNoSubmitButton","submitFormAjax","saveButtonText","setSaveButtonText","saveButtonClasses","setSaveButtonClasses","save","find","submit","cancel","_this$modal$getRoot$","addEventListener","show","eventName","detail","cancelable","CustomEvent","dispatchEvent","_len","_key","_this$modal$getRoot$2","formDataString","params","formdata","form","formClass","Ajax","methodname","response","html","js","Fragment","processCollectedJavascript","javascript","getFormNode","notifyFormSubmittedByJavascript","resetFormDirtyState","button","formData","encodeURIComponent","getAttribute","invalid","first","getFooter","attr","removeAttr","_callee","_this2","_context","validateElements","disableButtons","submitted","data","JSON","parse","markFormSubmitted","hide","promise","enableButtons","onSubmitError","removeClass","_exports"],"mappings":"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"}