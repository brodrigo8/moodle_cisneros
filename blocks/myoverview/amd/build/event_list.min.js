define(["jquery","core/notification","core/templates","block_myoverview/calendar_events_repository"],function(a,b,c,d){return{load:function(e){e=a(e);var f=+e.attr("data-start-day"),g=+e.attr("data-end-day"),h=+e.attr("data-limit"),i=+e.attr("data-offset");return e.hasClass("loading")?a.Deferred().resolve():(e.addClass("loading"),d.query_for_user_by_days(f,g,h,i).then(function(a){if(e.attr("data-offset",i+a.length),a.length)return c.render("block_myoverview/event-list-items",{events:a}).done(function(a,b){c.appendNodeContents(e,a,b)})}).fail(b.exception).always(function(){e.removeClass("loading")}))}}});