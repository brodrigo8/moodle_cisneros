define(["jquery","core/notification","core/ajax","core/templates","core/str","tool_lp/dialogue"],function(a,b,c,d,e,f){var g=function(){};return g.prototype.triggerPlanViewedEvent=function(a){var b={methodname:"tool_lp_plan_viewed",args:{id:a}};c.call([b])},g.prototype.afterShow=function(){},g.prototype.afterHide=function(){},g.prototype.showDialogue=function(a){var c=this.getPlanDataPromise(a),e=this;c.done(function(c){d.render("tool_lp/plan_summary",c).done(function(b){e.triggerPlanViewedEvent(a),new f(c.plan.name,b,this.afterShow,this.afterHide,!0)}).fail(b.exception)}).fail(b.exception)},g.prototype.clickEventHandler=function(b){var c=b.data.plandialogue,d=a(b.target).data("id");c.showDialogue(d),b.preventDefault()},g.prototype.getPlanDataPromise=function(a){var d={methodname:"tool_lp_data_for_plan_page",args:{planid:a}},e=c.call([d]);return e[0].then(function(a){return a}).fail(b.exception)},g.prototype.watch=function(b){'[data-region="relatedplans"]'===b&&a('[data-action="plan-dialogue"]').click({plandialogue:this},this.clickEventHandler)},g});