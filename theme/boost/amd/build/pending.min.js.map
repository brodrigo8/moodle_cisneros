{"version":3,"file":"pending.min.js","sources":["../src/pending.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Add Pending JS checks to stock Bootstrap transitions.\n *\n * @module     theme_boost/pending\n * @copyright  2019 Andrew Nicols <andrew@nicols.co.uk>\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\nimport jQuery from 'jquery';\nconst moduleTransitions = {\n    alert: [\n        // Alert.\n        {\n            start: 'close',\n            end: 'closed',\n        },\n    ],\n\n    carousel: [\n        {\n            start: 'slide',\n            end: 'slid',\n        },\n    ],\n\n    collapse: [\n        {\n            start: 'hide',\n            end: 'hidden',\n        },\n        {\n            start: 'show',\n            end: 'shown',\n        },\n    ],\n\n    dropdown: [\n        {\n            start: 'hide',\n            end: 'hidden',\n        },\n        {\n            start: 'show',\n            end: 'shown',\n        },\n    ],\n\n    modal: [\n        {\n            start: 'hide',\n            end: 'hidden',\n        },\n        {\n            start: 'show',\n            end: 'shown',\n        },\n    ],\n\n    popover: [\n        {\n            start: 'hide',\n            end: 'hidden',\n        },\n        {\n            start: 'show',\n            end: 'shown',\n        },\n    ],\n\n    tab: [\n        {\n            start: 'hide',\n            end: 'hidden',\n        },\n        {\n            start: 'show',\n            end: 'shown',\n        },\n    ],\n\n    toast: [\n        {\n            start: 'hide',\n            end: 'hidden',\n        },\n        {\n            start: 'show',\n            end: 'shown',\n        },\n    ],\n\n    tooltip: [\n        {\n            start: 'hide',\n            end: 'hidden',\n        },\n        {\n            start: 'show',\n            end: 'shown',\n        },\n    ],\n};\n\nexport default () => {\n    Object.entries(moduleTransitions).forEach(([key, pairs]) => {\n        pairs.forEach(pair => {\n            const eventStart = `${pair.start}.bs.${key}`;\n            const eventEnd = `${pair.end}.bs.${key}`;\n            jQuery(document.body).on(eventStart, e => {\n                M.util.js_pending(eventEnd);\n                jQuery(e.target).one(eventEnd, () => {\n                    M.util.js_complete(eventEnd);\n                });\n            });\n\n        });\n    });\n};\n"],"names":["obj","_slicedToArray","arr","i","Array","isArray","_arrayWithHoles","_i","Symbol","iterator","_s","_e","_x","_r","_arr","_n","_d","call","next","Object","done","push","value","length","err","return","_iterableToArrayLimit","o","minLen","_arrayLikeToArray","n","prototype","toString","slice","constructor","name","from","test","_unsupportedIterableToArray","TypeError","_nonIterableRest","len","arr2","_jquery","__esModule","default","moduleTransitions","alert","start","end","carousel","collapse","dropdown","modal","popover","tab","toast","tooltip","_exports","entries","forEach","_ref","_ref2","key","pair","eventStart","concat","eventEnd","jQuery","document","body","on","e","M","util","js_pending","target","one","js_complete"],"mappings":"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"}