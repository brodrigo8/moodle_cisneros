define(["jquery","core/str","core/ajax","core/notification"],function(a,b,c,d){return{formItems:null,typeField:null,exportString:null,exportStatus:null,init:function(e){var f=this;f.exportStatus=e,b.get_strings([{key:"requesttypeexport",component:"tool_dataprivacy"}]).done(function(b){f.exportString=a('<span class="export-string">'+b[0]+"</span>")}).fail(d.exception),a(".createrequestform").delegate("li[data-value]","click",function(){var b=a(this).attr("data-value");f.disableForm(!0);var e=c.call([{methodname:"tool_dataprivacy_can_create_delete_request",args:{user:b}}]);M.util.js_pending("check_can_request_delete"),e[0].then(function(a){var b=a.valid;return f.disableForm(!1),f.changeFormType(b),M.util.js_complete("check_can_request_delete"),!0}).fail(d.exception)})},disableForm:function(b){null===this.formItems&&(this.formItems=a('.createrequestform input[id*="form_autocomplete_input"],.createrequestform input[name="submitbutton"]')),b?(this.formItems.attr("disabled",1),this.formItems.css("pointer-events","none")):(this.formItems.removeAttr("disabled"),this.formItems.css("pointer-events","inherit"))},changeFormType:function(b){null===this.typeField&&(this.typeField=a('.createrequestform select[name="type"]'),this.typeField.parent().append(this.exportString)),b?(this.typeField.show(),this.exportString.hide()):(this.typeField.val(this.exportStatus),this.typeField.hide(),this.exportString.show())}}});