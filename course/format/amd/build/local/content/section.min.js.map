{"version":3,"file":"section.min.js","sources":["../../../src/local/content/section.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Course section format component.\n *\n * @module     core_courseformat/local/content/section\n * @class      core_courseformat/local/content/section\n * @copyright  2021 Ferran Recio <ferran@moodle.com>\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\nimport Header from 'core_courseformat/local/content/section/header';\nimport DndSection from 'core_courseformat/local/courseeditor/dndsection';\nimport Templates from 'core/templates';\n\nexport default class extends DndSection {\n\n    /**\n     * Constructor hook.\n     */\n    create() {\n        // Optional component name for debugging.\n        this.name = 'content_section';\n        // Default query selectors.\n        this.selectors = {\n            SECTION_ITEM: `[data-for='section_title']`,\n            CM: `[data-for=\"cmitem\"]`,\n            SECTIONINFO: `[data-for=\"sectioninfo\"]`,\n            SECTIONBADGES: `[data-region=\"sectionbadges\"]`,\n            SHOWSECTION: `[data-action=\"sectionShow\"]`,\n            HIDESECTION: `[data-action=\"sectionHide\"]`,\n            ACTIONTEXT: `.menu-action-text`,\n            ICON: `.icon`,\n        };\n        // Most classes will be loaded later by DndCmItem.\n        this.classes = {\n            LOCKED: 'editinprogress',\n            HASDESCRIPTION: 'description',\n            HIDE: 'd-none',\n            HIDDEN: 'hidden',\n            CURRENT: 'current',\n        };\n\n        // We need our id to watch specific events.\n        this.id = this.element.dataset.id;\n    }\n\n    /**\n     * Initial state ready method.\n     *\n     * @param {Object} state the initial state\n     */\n    stateReady(state) {\n        this.configState(state);\n        // Drag and drop is only available for components compatible course formats.\n        if (this.reactive.isEditing && this.reactive.supportComponents) {\n            // Section zero and other formats sections may not have a title to drag.\n            const sectionItem = this.getElement(this.selectors.SECTION_ITEM);\n            if (sectionItem) {\n                // Init the inner dragable element.\n                const headerComponent = new Header({\n                    ...this,\n                    element: sectionItem,\n                    fullregion: this.element,\n                });\n                this.configDragDrop(headerComponent);\n            }\n        }\n    }\n\n    /**\n     * Component watchers.\n     *\n     * @returns {Array} of watchers\n     */\n    getWatchers() {\n        return [\n            {watch: `section[${this.id}]:updated`, handler: this._refreshSection},\n        ];\n    }\n\n    /**\n     * Validate if the drop data can be dropped over the component.\n     *\n     * @param {Object} dropdata the exported drop data.\n     * @returns {boolean}\n     */\n    validateDropData(dropdata) {\n        // If the format uses one section per page sections dropping in the content is ignored.\n       if (dropdata?.type === 'section' && this.reactive.sectionReturn != 0) {\n            return false;\n        }\n        return super.validateDropData(dropdata);\n    }\n\n    /**\n     * Get the last CM element of that section.\n     *\n     * @returns {element|null}\n     */\n    getLastCm() {\n        const cms = this.getElements(this.selectors.CM);\n        // DndUpload may add extra elements so :last-child selector cannot be used.\n        if (!cms || cms.length === 0) {\n            return null;\n        }\n        return cms[cms.length - 1];\n    }\n\n    /**\n     * Update a content section using the state information.\n     *\n     * @param {object} param\n     * @param {Object} param.element details the update details.\n     */\n    _refreshSection({element}) {\n        // Update classes.\n        this.element.classList.toggle(this.classes.DRAGGING, element.dragging ?? false);\n        this.element.classList.toggle(this.classes.LOCKED, element.locked ?? false);\n        this.element.classList.toggle(this.classes.HIDDEN, !element.visible ?? false);\n        this.element.classList.toggle(this.classes.CURRENT, element.current ?? false);\n        this.locked = element.locked;\n        // The description box classes depends on the section state.\n        const sectioninfo = this.getElement(this.selectors.SECTIONINFO);\n        if (sectioninfo) {\n            sectioninfo.classList.toggle(this.classes.HASDESCRIPTION, element.hasrestrictions);\n        }\n        // Update section badges and menus.\n        this._updateBadges(element);\n        this._updateActionsMenu(element);\n    }\n\n    /**\n     * Update a section badges using the state information.\n     *\n     * @param {object} section the section state.\n     */\n    _updateBadges(section) {\n        const current = this.getElement(`${this.selectors.SECTIONBADGES} [data-type='iscurrent']`);\n        current?.classList.toggle(this.classes.HIDE, !section.current);\n\n        const hiddenFromStudents = this.getElement(`${this.selectors.SECTIONBADGES} [data-type='hiddenfromstudents']`);\n        hiddenFromStudents?.classList.toggle(this.classes.HIDE, section.visible);\n    }\n\n    /**\n     * Update a section action menus.\n     *\n     * @param {object} section the section state.\n     */\n    async _updateActionsMenu(section) {\n        let selector;\n        let newAction;\n        if (section.visible) {\n            selector = this.selectors.SHOWSECTION;\n            newAction = 'sectionHide';\n        } else {\n            selector = this.selectors.HIDESECTION;\n            newAction = 'sectionShow';\n        }\n        // Find the affected action.\n        const affectedAction = this.getElement(selector);\n        if (!affectedAction) {\n            return;\n        }\n        // Change action.\n        affectedAction.dataset.action = newAction;\n        // Change text.\n        const actionText = affectedAction.querySelector(this.selectors.ACTIONTEXT);\n        if (affectedAction.dataset?.swapname && actionText) {\n            const oldText = actionText?.innerText;\n            actionText.innerText = affectedAction.dataset.swapname;\n            affectedAction.dataset.swapname = oldText;\n        }\n        // Change icon.\n        const icon = affectedAction.querySelector(this.selectors.ICON);\n        if (affectedAction.dataset?.swapicon && icon) {\n            const newIcon = affectedAction.dataset.swapicon;\n            if (newIcon) {\n                const pixHtml = await Templates.renderPix(newIcon, 'core');\n                Templates.replaceNode(icon, pixHtml, '');\n            }\n        }\n    }\n}\n"],"names":["_interopRequireDefault","obj","__esModule","default","_regeneratorRuntime","exports","Op","Object","prototype","hasOwn","hasOwnProperty","defineProperty","key","desc","value","$Symbol","Symbol","iteratorSymbol","iterator","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","toStringTag","define","enumerable","configurable","writable","err","wrap","innerFn","outerFn","self","tryLocsList","protoGenerator","Generator","generator","create","context","Context","makeInvokeMethod","tryCatch","fn","arg","type","call","ContinueSentinel","GeneratorFunction","GeneratorFunctionPrototype","IteratorPrototype","this","getProto","getPrototypeOf","NativeIteratorPrototype","values","Gp","defineIteratorMethods","forEach","method","_invoke","AsyncIterator","PromiseImpl","invoke","resolve","reject","record","result","_typeof","__await","then","unwrapped","error","previousPromise","callInvokeWithMethodAndArg","state","Error","doneResult","delegate","delegateResult","maybeInvokeDelegate","sent","_sent","dispatchException","abrupt","done","methodName","undefined","return","TypeError","info","resultName","next","nextLoc","pushTryEntry","locs","entry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","push","resetTryEntry","completion","reset","iterable","iteratorMethod","isNaN","length","i","displayName","isGeneratorFunction","genFun","ctor","constructor","name","mark","setPrototypeOf","__proto__","awrap","async","Promise","iter","keys","val","object","reverse","pop","skipTempReset","prev","charAt","slice","stop","rootRecord","rval","exception","handle","loc","caught","hasCatch","hasFinally","finallyEntry","complete","finish","catch","thrown","delegateYield","asyncGeneratorStep","gen","_next","_throw","ownKeys","enumerableOnly","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","apply","_objectSpread","target","arguments","source","_defineProperty","getOwnPropertyDescriptors","defineProperties","_toPropertyKey","_classCallCheck","instance","Constructor","_defineProperties","props","descriptor","input","hint","prim","toPrimitive","res","String","Number","_toPrimitive","_get","Reflect","get","bind","property","receiver","base","_superPropBase","_getPrototypeOf","_setPrototypeOf","o","p","_createSuper","Derived","hasNativeReflectConstruct","construct","sham","Proxy","Boolean","valueOf","e","_isNativeReflectConstruct","Super","NewTarget","_possibleConstructorReturn","ReferenceError","_assertThisInitialized","_header","_dndsection","_templates","_default","_DndSection","subClass","superClass","_inherits","protoProps","staticProps","_updateActionsMenu2","_super","selectors","SECTION_ITEM","CM","SECTIONINFO","SECTIONBADGES","SHOWSECTION","HIDESECTION","ACTIONTEXT","ICON","classes","LOCKED","HASDESCRIPTION","HIDE","HIDDEN","CURRENT","id","element","dataset","configState","reactive","isEditing","supportComponents","sectionItem","getElement","headerComponent","Header","fullregion","configDragDrop","watch","concat","handler","_refreshSection","dropdata","sectionReturn","cms","getElements","_ref","_element$dragging","_element$locked","_element$visible","_element$current","classList","toggle","DRAGGING","dragging","locked","visible","current","sectioninfo","hasrestrictions","_updateBadges","_updateActionsMenu","section","hiddenFromStudents","_affectedAction$datas","_affectedAction$datas2","selector","newAction","affectedAction","actionText","oldText","icon","newIcon","pixHtml","_context","action","querySelector","swapname","innerText","swapicon","Templates","renderPix","replaceNode","_callee","args","_x","DndSection","_exports"],"mappings":"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"}