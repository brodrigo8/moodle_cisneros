define(["jquery","core/templates","core/notification","core/ajax","core/str","core/yui"],function(a,b,c,d,e){var f=[],g=function(){this.registerEvents(),a('[data-region="question-row"]').each(function(){f[a(this).data("itemid")]=null})};return g.prototype.registerEvents=function(){a(".scaleoption").click(function(){var b=a(this).parent('[data-region="question-row"]'),c=b.find("label");a.each(c,function(){if(a(this).hasClass("label-success")){a(this).removeClass("label-success"),a(this).addClass("label-default");var b=a("#"+a(this).attr("for"));b.removeAttr("checked")}});var d=a(this).find("label");d.removeClass("label-default"),d.removeClass("label-info"),d.addClass("label-success");var e=a("#"+d.attr("for"));e.attr("checked","checked");var g=b.data("itemid");f[g]=d.data("value")}),a(".scaleoptionlabel").hover(function(){a(this).hasClass("label-success")||(a(this).hasClass("label-default")?(a(this).removeClass("label-default"),a(this).addClass("label-info")):(a(this).addClass("label-default"),a(this).removeClass("label-info")))}),a("#submit-feedback").click(function(){a(".comment").each(function(){f[a(this).data("itemid")]=a(this).val().trim()});var b=!0;a.each(f,function(a,c){if(a>0&&!c)return void(b=!1)});var e=a('[data-region="questionnaire"]').data("touserid"),g=a('[data-region="questionnaire"]').data("threesixtyid"),h=d.call([{methodname:"mod_threesixty_save_responses",args:{threesixtyid:g,touserid:e,responses:f}}]);h[0].done(function(a){window.location=a.redirurl}).fail(c.exception)})},g});