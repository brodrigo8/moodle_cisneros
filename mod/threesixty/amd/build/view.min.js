define(["jquery","core/templates","core/notification","core/ajax","core/str","mod_threesixty/question_bank","core/yui"],function(a,b,c,d,e,f){function g(){var e=d.call([{methodname:"mod_threesixty_data_for_participant_list",args:{threesixtyid:i}}]);e[0].done(function(d){b.render("mod_threesixty/list_participants",d).done(function(c,d){a('[data-region="participantlist"]').replaceWith(c),b.runTemplateJS(d)}).fail(c.exception)}).fail(c.exception);var e=d.call([{methodname:method,args:data}])}function h(b,e){var f=new M.core.dialogue({modal:!0,headerContent:b,bodyContent:'<div id="decline-dialogue-container"/>',draggable:!0,center:!0});f.show(),f.after("visibleChange",function(a){a.prevVal&&!a.newVal&&this.destroy()},f),a("#decline-dialogue-container").html(e),a("#btn-cancel-decline").click(function(){f.hide()}),a("#btn-decline").click(function(b){b.preventDefault();var e=a(this).data("statusid"),h=a("#decline-reason").val().trim(),i={statusid:e,declinereason:h},j="mod_threesixty_decline_feedback",k=d.call([{methodname:j,args:i}]);k[0].done(function(){f.hide(),g()}).fail(c.exception)})}var i,j=function(a){i=a,this.registerEvents()};return j.prototype.registerEvents=function(){a(".decline-feedback-button").click(function(){var d=a(this).data("statusid"),f=a(this).data("name"),g={statusid:d,name:f};b.render("mod_threesixty/decline_feedback",g).done(function(b){e.get_string("declinefeedback","mod_threesixty").done(function(c){var d=a("<label/>").append(c);h(d,b)}).fail(c.exception)}).fail(c.exception)})},j});